"use strict";

// Pop up newsletter
var popupNewsletter = document.querySelector('#popup-newsletter-block');
var popupNewsletterMain = document.querySelector('#popup-newsletter-block .popup-newsletter-main');
var closePopupNewsletterBtn = document.querySelector('#popup-newsletter-block .close-block');
window.onload = function () {
  if (popupNewsletter) {
    setTimeout(function () {
      popupNewsletter.classList.add('open');
    }, 400);
  }
};
if (closePopupNewsletterBtn) {
  closePopupNewsletterBtn.addEventListener('click', function () {
    popupNewsletter.classList.remove('open');
  });
}

// click outside mobile menu, close mobile menu
if (popupNewsletter) {
  popupNewsletter.addEventListener('click', function () {
    popupNewsletter.classList.remove('open');
  });
}

// prevent default behavior when clicking mobile menu
if (popupNewsletterMain) {
  popupNewsletterMain.addEventListener('click', function (event) {
    event.stopPropagation();
  });
}

// mobile menu
var mobileMenuBtn = document.querySelector('.menu-humburger i');
var menuMobile = document.querySelector('#menu-mobile-block');
var menuMobileMain = document.querySelector('#menu-mobile-block .menu-mobile-main');
var closeMobileBtn = document.querySelector('#menu-mobile-block .close-block');
var subMenuMobile = document.querySelectorAll('#menu-mobile-block .sub-nav-mobile');

// click menu humburger icon, show mobile menu
if (mobileMenuBtn) {
  mobileMenuBtn.addEventListener('click', function () {
    menuMobile.classList.add('open');
  });
}
var itemLinks = document.querySelectorAll('#menu-mobile-block ul li');
itemLinks.forEach(function (item) {
  item.addEventListener('click', function () {
    item.querySelector('.sub-nav-mobile').classList.toggle('open');
  });
  var backIcon = document.querySelector('.sub-nav-mobile .back-block');
  backIcon.addEventListener('click', function () {
    subMenuMobile.classList.remove('open');
  });
});

// click icon close, close mobile menu
if (closeMobileBtn) {
  closeMobileBtn.addEventListener('click', function () {
    menuMobile.classList.remove('open');
  });
}

// click outside mobile menu, close mobile menu
if (menuMobile) {
  menuMobile.addEventListener('click', function () {
    menuMobile.classList.remove('open');
  });
}

// prevent default behavior when clicking mobile menu
if (menuMobileMain) {
  menuMobileMain.addEventListener('click', function (event) {
    event.stopPropagation();
  });
}

// change type pricing
var chooseType = document.querySelector('.choose-type');
var listPricing = document.querySelectorAll('.list-pricing');
if (chooseType) {
  chooseType.onclick = function (selectedItem) {
    if (selectedItem.target.classList.contains("button")) {
      // add active class
      chooseType.querySelector('.active').classList.remove('active');
      selectedItem.target.classList.add('active');

      //get data-name value
      var filterName = selectedItem.target.getAttribute('data-name');
      listPricing.forEach(function (item) {
        if (filterName === item.getAttribute('data-name')) {
          item.classList.add('show');
          item.classList.remove('hide');
        } else {
          item.classList.remove('show');
          item.classList.add('hide');
        }
      });
    }
  };
}

// open answer faqs
var questionItem = document.querySelectorAll('.question-item');
if (questionItem) {
  questionItem.forEach(function (item, index) {
    var titleItem = item.querySelector('.question-item-main');
    var icon = item.querySelector('i');
    titleItem.addEventListener('click', function () {
      item.classList.toggle('open');
      if (item.classList.contains('open')) {
        setTimeout(function () {
          icon.classList.replace('ph-plus', 'ph-minus');
        }, 200);
      } else {
        setTimeout(function () {
          icon.classList.replace('ph-minus', 'ph-plus');
        }, 200);
      }
      removeOpen(index);
    });
    if (item.classList.contains('open')) {
      icon.classList.replace('ph-plus', 'ph-minus');
    } else {
      icon.classList.replace('ph-minus', 'ph-plus');
    }
  });
}
function removeOpen(index1) {
  questionItem.forEach(function (item2, index2) {
    if (index1 != index2) {
      item2.classList.remove('open');
      item2.querySelector('i').classList.replace('ph-minus', 'ph-plus');
    }
  });
}